{{ extend 'layouts/dashboard' }}

{{ block 'head' : }}
<!-- amcharts themes -->
<link href="/js/amcharts/plugins/export/export.css" rel="stylesheet">
<link href="/css/custom/data.css" rel="stylesheet">
{{ end }}
{{ block 'footer' : }}
<script src="/js/amcharts/amcharts.js" type="text/javascript"></script>
<script src="/js/amcharts/serial.js" type="text/javascript"></script>
<script src="/js/amstockchart/amstock.js" type="text/javascript"></script>
<script src="/js/amcharts/plugins/export/export.js" type="text/javascript"></script>
<script src="/js/amcharts/plugins/dataloader/dataloader.min.js" type="text/javascript"></script>
<script src="/js/socket.io.js"></script>
<script src="/js/custom/data.js"></script>

{{ end }}
<div class="row">
  <div id="userProbes" class="scrollbox">

     {{for device in @devices :}}

     <div style='margin-bottom:20px' class='col-lg-3 col-md-6'>
       {{ switch device.status : }}
        {{ when 'non connecté' : }}
        <div style='margin-bottom:0px' class='panel panel-danger'>
        {{ end }}
        {{ when 'connecté' : }}
        <div style='margin-bottom:0px' class='panel panel-success'>
        {{ end }}
        {{ else : }}
        <div style='margin-bottom:0px' class='panel panel-warning'>
        {{ end }}
        {{ end }}
         <div id='{{= device.ref}}' class='panel-heading mod-fade'>
             <div class='row'>
                 <div class='col-xs-3'>
                     <i class='fa fa-rss fa-5x'></i>
                 </div>
                 <div class='col-xs-9 text-right'>
                 <div class='name'>{{= device.name}}</div>
             </div>
         </div>
         </div>
     </div>
   </div>
   {{end}}

  </div>
</div>




<hr>
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
        <div class="panel-heading">
          <span class="text-left">Flux de données temps réel</span>
          <span class="pull-right"><i class="fa fa-bar-chart"></i></span>
        </div>
        <div class="panel-body">
          <!-- AmCharts container -->
          <div id="chartdiv" style="width: 100%; height: 400px;" class="fa" ></div>

        </div>
    </div>
  </div>
</div>
<!-- /.row -->
